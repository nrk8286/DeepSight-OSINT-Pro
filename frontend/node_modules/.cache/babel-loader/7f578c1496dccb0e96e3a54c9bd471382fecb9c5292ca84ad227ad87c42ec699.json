{"ast":null,"code":"const API=process.env.REACT_APP_API_ORIGIN;const ADMIN=process.env.REACT_APP_ADMIN_TOKEN;async function j(method,path,body){const headers={};if(body)headers['content-type']='application/json';if(ADMIN)headers['authorization']=\"Bearer \".concat(ADMIN);const r=await fetch(\"\".concat(API).concat(path),{method,headers,body:body?JSON.stringify(body):undefined});if(!r.ok){let msg=\"HTTP \".concat(r.status);try{const t=await r.text();if(t)msg+=\": \".concat(t);}catch(_unused){}throw new Error(msg);}const ct=r.headers.get('content-type')||'';if(ct.includes('application/json'))return r.json();return r.text();}export const health=()=>j('GET','/api/health');export const getSignedUpload=key=>j('POST','/api/images/upload-url',{key});export async function uploadToR2(putUrl,file){const headers=ADMIN?{authorization:\"Bearer \".concat(ADMIN)}:undefined;const r=await fetch(putUrl,{method:'PUT',body:file,headers});if(!r.ok)throw new Error('upload failed');return true;}export const saveImageMeta=meta=>j('POST','/api/images',meta);export async function searchText(q){let k=arguments.length>1&&arguments[1]!==undefined?arguments[1]:24;const qs=\"?kind=text&q=\".concat(encodeURIComponent(q),\"&k=\").concat(encodeURIComponent(String(k)));return j('GET',\"/api/search\".concat(qs));}export async function searchPHash(phash){const qs=\"?kind=phash&phash=\".concat(encodeURIComponent(phash));return j('GET',\"/api/search\".concat(qs));}export async function listImages(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:24;const qs=\"?page=\".concat(encodeURIComponent(String(page)),\"&limit=\").concat(encodeURIComponent(String(limit)));return j('GET',\"/api/images/list\".concat(qs));}export const enqueueCrawl=job=>j('POST','/api/crawl',job);export const stats=()=>j('GET','/api/stats');","map":{"version":3,"names":["API","process","env","REACT_APP_API_ORIGIN","ADMIN","REACT_APP_ADMIN_TOKEN","j","method","path","body","headers","concat","r","fetch","JSON","stringify","undefined","ok","msg","status","t","text","_unused","Error","ct","get","includes","json","health","getSignedUpload","key","uploadToR2","putUrl","file","authorization","saveImageMeta","meta","searchText","q","k","arguments","length","qs","encodeURIComponent","String","searchPHash","phash","listImages","page","limit","enqueueCrawl","job","stats"],"sources":["C:/Users/nrk82/Downloads/deepsight_osint_pro_advanced/deepsight_v2_adv/frontend/src/api.js"],"sourcesContent":["const API = process.env.REACT_APP_API_ORIGIN;\nconst ADMIN = process.env.REACT_APP_ADMIN_TOKEN;\n\nasync function j(method, path, body) {\n  const headers = {};\n  if (body) headers['content-type'] = 'application/json';\n  if (ADMIN) headers['authorization'] = `Bearer ${ADMIN}`;\n  const r = await fetch(`${API}${path}`, {\n    method,\n    headers,\n    body: body ? JSON.stringify(body) : undefined,\n  });\n  if (!r.ok) {\n    let msg = `HTTP ${r.status}`;\n    try {\n      const t = await r.text();\n      if (t) msg += `: ${t}`;\n    } catch {}\n    throw new Error(msg);\n  }\n  const ct = r.headers.get('content-type') || '';\n  if (ct.includes('application/json')) return r.json();\n  return r.text();\n}\n\nexport const health = () => j('GET', '/api/health');\n\nexport const getSignedUpload = (key) => j('POST', '/api/images/upload-url', { key });\n\nexport async function uploadToR2(putUrl, file) {\n  const headers = ADMIN ? { authorization: `Bearer ${ADMIN}` } : undefined;\n  const r = await fetch(putUrl, { method: 'PUT', body: file, headers });\n  if (!r.ok) throw new Error('upload failed');\n  return true;\n}\n\nexport const saveImageMeta = (meta) => j('POST', '/api/images', meta);\n\nexport async function searchText(q, k = 24) {\n  const qs = `?kind=text&q=${encodeURIComponent(q)}&k=${encodeURIComponent(String(k))}`;\n  return j('GET', `/api/search${qs}`);\n}\n\nexport async function searchPHash(phash) {\n  const qs = `?kind=phash&phash=${encodeURIComponent(phash)}`;\n  return j('GET', `/api/search${qs}`);\n}\n\nexport async function listImages(page = 0, limit = 24) {\n  const qs = `?page=${encodeURIComponent(String(page))}&limit=${encodeURIComponent(String(limit))}`;\n  return j('GET', `/api/images/list${qs}`);\n}\n\nexport const enqueueCrawl = (job) => j('POST', '/api/crawl', job);\n\nexport const stats = () => j('GET', '/api/stats');\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}