{"ast":null,"code":"import React,{useState}from'react';import{getSignedUpload,uploadToR2,saveImageMeta}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadPage(){const[file,setFile]=useState(null);const[busy,setBusy]=useState(false);const[msg,setMsg]=useState('');async function doUpload(){if(!file)return;setBusy(true);setMsg('uploading...');try{const key=\"uploads/\".concat(Date.now(),\"_\").concat(file.name);const{put,get}=await getSignedUpload(key);await uploadToR2(put,file);const meta={id:crypto.randomUUID(),url:get,r2_key:key,bytes:file.size,text:file.name};await saveImageMeta(meta);setMsg('done');}catch(e){setMsg('failed');alert('upload failed');}finally{setBusy(false);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>{var _e$target$files;return setFile(((_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0])||null);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",disabled:!file||busy,onClick:doUpload,style:{marginLeft:8},children:\"Upload\"}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:8},className:\"muted\",children:msg})]});}","map":{"version":3,"names":["React","useState","getSignedUpload","uploadToR2","saveImageMeta","jsx","_jsx","jsxs","_jsxs","UploadPage","file","setFile","busy","setBusy","msg","setMsg","doUpload","key","concat","Date","now","name","put","get","meta","id","crypto","randomUUID","url","r2_key","bytes","size","text","e","alert","className","children","type","accept","onChange","_e$target$files","target","files","disabled","onClick","style","marginLeft"],"sources":["C:/Users/nrk82/Downloads/deepsight_osint_pro_advanced/deepsight_v2_adv/frontend/src/components/UploadPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { getSignedUpload, uploadToR2, saveImageMeta } from '../api';\n\nexport default function UploadPage() {\n  const [file, setFile] = useState(null);\n  const [busy, setBusy] = useState(false);\n  const [msg, setMsg] = useState('');\n\n  async function doUpload() {\n    if (!file) return;\n    setBusy(true);\n    setMsg('uploading...');\n    try {\n      const key = `uploads/${Date.now()}_${file.name}`;\n      const { put, get } = await getSignedUpload(key);\n      await uploadToR2(put, file);\n      const meta = {\n        id: crypto.randomUUID(),\n        url: get,\n        r2_key: key,\n        bytes: file.size,\n        text: file.name,\n      };\n      await saveImageMeta(meta);\n      setMsg('done');\n    } catch (e) {\n      setMsg('failed');\n      alert('upload failed');\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <h2>Upload</h2>\n      <input type=\"file\" accept=\"image/*\" onChange={(e) => setFile(e.target.files?.[0] || null)} />\n      <button className=\"btn\" disabled={!file || busy} onClick={doUpload} style={{ marginLeft: 8 }}>\n        Upload\n      </button>\n      <span style={{ marginLeft: 8 }} className=\"muted\">\n        {msg}\n      </span>\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,eAAe,CAAEC,UAAU,CAAEC,aAAa,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpE,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACnC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CACvC,KAAM,CAACa,GAAG,CAAEC,MAAM,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAElC,cAAe,CAAAe,QAAQA,CAAA,CAAG,CACxB,GAAI,CAACN,IAAI,CAAE,OACXG,OAAO,CAAC,IAAI,CAAC,CACbE,MAAM,CAAC,cAAc,CAAC,CACtB,GAAI,CACF,KAAM,CAAAE,GAAG,YAAAC,MAAA,CAAcC,IAAI,CAACC,GAAG,CAAC,CAAC,MAAAF,MAAA,CAAIR,IAAI,CAACW,IAAI,CAAE,CAChD,KAAM,CAAEC,GAAG,CAAEC,GAAI,CAAC,CAAG,KAAM,CAAArB,eAAe,CAACe,GAAG,CAAC,CAC/C,KAAM,CAAAd,UAAU,CAACmB,GAAG,CAAEZ,IAAI,CAAC,CAC3B,KAAM,CAAAc,IAAI,CAAG,CACXC,EAAE,CAAEC,MAAM,CAACC,UAAU,CAAC,CAAC,CACvBC,GAAG,CAAEL,GAAG,CACRM,MAAM,CAAEZ,GAAG,CACXa,KAAK,CAAEpB,IAAI,CAACqB,IAAI,CAChBC,IAAI,CAAEtB,IAAI,CAACW,IACb,CAAC,CACD,KAAM,CAAAjB,aAAa,CAACoB,IAAI,CAAC,CACzBT,MAAM,CAAC,MAAM,CAAC,CAChB,CAAE,MAAOkB,CAAC,CAAE,CACVlB,MAAM,CAAC,QAAQ,CAAC,CAChBmB,KAAK,CAAC,eAAe,CAAC,CACxB,CAAC,OAAS,CACRrB,OAAO,CAAC,KAAK,CAAC,CAChB,CACF,CAEA,mBACEL,KAAA,QAAK2B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB9B,IAAA,OAAA8B,QAAA,CAAI,QAAM,CAAI,CAAC,cACf9B,IAAA,UAAO+B,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,SAAS,CAACC,QAAQ,CAAGN,CAAC,OAAAO,eAAA,OAAK,CAAA7B,OAAO,CAAC,EAAA6B,eAAA,CAAAP,CAAC,CAACQ,MAAM,CAACC,KAAK,UAAAF,eAAA,iBAAdA,eAAA,CAAiB,CAAC,CAAC,GAAI,IAAI,CAAC,EAAC,CAAE,CAAC,cAC7FlC,IAAA,WAAQ6B,SAAS,CAAC,KAAK,CAACQ,QAAQ,CAAE,CAACjC,IAAI,EAAIE,IAAK,CAACgC,OAAO,CAAE5B,QAAS,CAAC6B,KAAK,CAAE,CAAEC,UAAU,CAAE,CAAE,CAAE,CAAAV,QAAA,CAAC,QAE9F,CAAQ,CAAC,cACT9B,IAAA,SAAMuC,KAAK,CAAE,CAAEC,UAAU,CAAE,CAAE,CAAE,CAACX,SAAS,CAAC,OAAO,CAAAC,QAAA,CAC9CtB,GAAG,CACA,CAAC,EACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}