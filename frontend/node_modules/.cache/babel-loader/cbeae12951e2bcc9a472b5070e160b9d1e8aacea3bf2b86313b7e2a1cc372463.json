{"ast":null,"code":"import React,{useState}from'react';import{searchText}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchPage(){const[q,setQ]=useState('bridge');const[busy,setBusy]=useState(false);const[results,setResults]=useState([]);const r2url=k=>\"\".concat(process.env.REACT_APP_API_ORIGIN,\"/r2/\").concat(encodeURIComponent(k));async function go(){setBusy(true);try{const out=await searchText(q,24);const arr=out.matches||out.results||[];setResults(arr);}catch(e){alert('search failed');}finally{setBusy(false);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Search\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{marginTop:8},children:[/*#__PURE__*/_jsx(\"input\",{value:q,onChange:e=>setQ(e.target.value),placeholder:\"query\",style:{flex:'0 0 320px'}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:go,disabled:busy,style:{marginLeft:8},children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid\",style:{marginTop:12},children:results.map((r,i)=>{const m=(r===null||r===void 0?void 0:r.metadata)||r;const u=m===null||m===void 0?void 0:m.url;const k=(m===null||m===void 0?void 0:m.key)||(m===null||m===void 0?void 0:m.r2_key);return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[k?/*#__PURE__*/_jsx(\"img\",{src:r2url(k),alt:\"\",loading:\"lazy\"}):/*#__PURE__*/_jsx(\"div\",{style:{height:180,background:'#f3f4f6'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"meta\",children:[/*#__PURE__*/_jsx(\"span\",{title:u,style:{overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',maxWidth:'70%'},children:u?new URL(u).hostname:'—'}),u?/*#__PURE__*/_jsx(\"a\",{className:\"btn\",href:u,target:\"_blank\",rel:\"noreferrer\",children:\"Source\"}):null]})]},((m===null||m===void 0?void 0:m.id)||k||i)+'k');})})]});}","map":{"version":3,"names":["React","useState","searchText","jsx","_jsx","jsxs","_jsxs","SearchPage","q","setQ","busy","setBusy","results","setResults","r2url","k","concat","process","env","REACT_APP_API_ORIGIN","encodeURIComponent","go","out","arr","matches","e","alert","className","children","style","marginTop","value","onChange","target","placeholder","flex","onClick","disabled","marginLeft","map","r","i","m","metadata","u","url","key","r2_key","src","alt","loading","height","background","title","overflow","textOverflow","whiteSpace","maxWidth","URL","hostname","href","rel","id"],"sources":["C:/Users/nrk82/Downloads/deepsight_osint_pro_advanced/deepsight_v2_adv/frontend/src/components/SearchPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { searchText } from '../api';\n\nexport default function SearchPage() {\n  const [q, setQ] = useState('bridge');\n  const [busy, setBusy] = useState(false);\n  const [results, setResults] = useState([]);\n\n  const r2url = (k) => `${process.env.REACT_APP_API_ORIGIN}/r2/${encodeURIComponent(k)}`;\n\n  async function go() {\n    setBusy(true);\n    try {\n      const out = await searchText(q, 24);\n      const arr = out.matches || out.results || [];\n      setResults(arr);\n    } catch (e) {\n      alert('search failed');\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <h2>Search</h2>\n      <div className=\"row\" style={{ marginTop: 8 }}>\n        <input\n          value={q}\n          onChange={(e) => setQ(e.target.value)}\n          placeholder=\"query\"\n          style={{ flex: '0 0 320px' }}\n        />\n        <button className=\"btn\" onClick={go} disabled={busy} style={{ marginLeft: 8 }}>\n          Search\n        </button>\n      </div>\n\n      <div className=\"grid\" style={{ marginTop: 12 }}>\n        {results.map((r, i) => {\n          const m = r?.metadata || r;\n          const u = m?.url;\n          const k = m?.key || m?.r2_key;\n          return (\n            <div className=\"card\" key={(m?.id || k || i) + 'k'}>\n              {k ? (\n                <img src={r2url(k)} alt=\"\" loading=\"lazy\" />\n              ) : (\n                <div style={{ height: 180, background: '#f3f4f6' }} />\n              )}\n              <div className=\"meta\">\n                <span\n                  title={u}\n                  style={{\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis',\n                    whiteSpace: 'nowrap',\n                    maxWidth: '70%',\n                  }}\n                >\n                  {u ? new URL(u).hostname : '—'}\n                </span>\n                {u ? (\n                  <a className=\"btn\" href={u} target=\"_blank\" rel=\"noreferrer\">\n                    Source\n                  </a>\n                ) : null}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}